---
const year = new Date().getFullYear();
---

<footer class="footer">
  <div class="container footer-inner">
    <div class="footer-left">
      <p class="footer-name">Pranay Shrestha</p>
      <p class="footer-affiliation">Department of Materials, University of Oxford</p>
    </div>
    <div class="footer-right">
      <div class="footer-links">
        <a href="https://scholar.google.ca/citations?user=_jviuGsAAAAJ&hl=en" target="_blank" rel="noopener noreferrer" aria-label="Google Scholar">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5.242 13.769 0 9.5 12 2l12 7.5v9"/><path d="M6 12v5.5a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V12"/><circle cx="12" cy="14" r="4"/></svg>
        </a>
        <a href="https://orcid.org/0000-0002-9881-1973" target="_blank" rel="noopener noreferrer" aria-label="ORCID">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9 8v8"/><path d="M13 8h1a3 3 0 0 1 0 6h-1V8z"/></svg>
        </a>
        <a href="https://www.linkedin.com/in/pranay-shrestha-b9447621" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-4 0v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
        </a>
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode" type="button">
          <svg class="icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
          <svg class="icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
        </button>
      </div>
      <p class="footer-copy">&copy; {year} Pranay Shrestha</p>
    </div>
  </div>
</footer>

<script>
  const toggle = document.getElementById('theme-toggle');
  const html = document.documentElement;

  // Restore saved preference
  const saved = localStorage.getItem('theme');
  if (saved === 'dark') {
    html.setAttribute('data-theme', 'dark');
  }

  toggle?.addEventListener('click', () => {
    const isDark = html.getAttribute('data-theme') === 'dark';
    if (isDark) {
      html.removeAttribute('data-theme');
      localStorage.setItem('theme', 'light');
    } else {
      html.setAttribute('data-theme', 'dark');
      localStorage.setItem('theme', 'dark');
    }
  });
</script>

<style>
  .footer {
    margin-top: var(--space-4xl);
    padding: var(--space-2xl) 0;
    border-top: 1px solid var(--color-border-light);
  }

  .footer-inner {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    gap: var(--space-xl);
  }

  .footer-name {
    font-family: var(--font-heading);
    font-weight: 600;
    font-size: var(--text-sm);
    color: var(--color-text);
    margin-bottom: var(--space-xs);
  }

  .footer-affiliation {
    font-size: var(--text-sm);
    color: var(--color-text-muted);
    margin-bottom: 0;
  }

  .footer-right {
    text-align: right;
  }

  .footer-links {
    display: flex;
    gap: var(--space-md);
    justify-content: flex-end;
    align-items: center;
    margin-bottom: var(--space-sm);
  }

  .footer-links a {
    color: var(--color-text-muted);
    transition: color var(--duration-fast) var(--ease-out);
  }

  .footer-links a:hover {
    color: var(--color-accent);
  }

  .theme-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 34px;
    height: 34px;
    border: 1px solid var(--color-border);
    border-radius: 50%;
    background: transparent;
    color: var(--color-text-muted);
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-out);
    margin-left: var(--space-sm);
  }

  .theme-toggle:hover {
    color: var(--color-accent);
    border-color: var(--color-accent);
  }

  /* Show sun in dark mode, moon in light mode */
  .icon-sun { display: none; }
  .icon-moon { display: block; }

  :global([data-theme="dark"]) .icon-sun { display: block; }
  :global([data-theme="dark"]) .icon-moon { display: none; }

  .footer-copy {
    font-size: var(--text-xs);
    color: var(--color-text-light);
    margin-bottom: 0;
  }

  @media (max-width: 640px) {
    .footer-inner {
      flex-direction: column;
      align-items: flex-start;
    }

    .footer-right {
      text-align: left;
    }

    .footer-links {
      justify-content: flex-start;
    }
  }
</style>
